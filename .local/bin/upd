#!/bin/sh
# may need mkdir -p for some of the dirs? kg and ncm no need, how about refl and gall

refl ()
{
	sudo reflector --save /etc/pacman.d/mirrorlist --latest 200 --sort rate
}

gall ()
{
	gallery-dl --download-archive "$XDG_DOCUMENTS_DIR/database/gallery-dl.sqlite3" -d "$XDG_PICTURES_DIR/anime" -i "$XDG_CONFIG_HOME/myconf/gallery_urls"
}

kg ()
{
	curlkg -u649b9e82272a348b -- "$XDG_MUSIC_DIR/not_pure/lan_lan/kg/"
	curlkg -u64949d822c25328c -- "$XDG_MUSIC_DIR/not_pure/cheng_ruan/kg/"
}

ncm ()
{
	curlncm -a48860966 -- "$XDG_MUSIC_DIR/not_pure/lan_lan/ncm/artist/"
	curlncm -a46703185 -- "$XDG_MUSIC_DIR/not_pure/cheng_ruan/ncm/artist/"
	curlncm -r793052426 -- "$XDG_MUSIC_DIR/not_pure/lan_lan/ncm/djradio/"
	curlncm -r792968433 -- "$XDG_MUSIC_DIR/not_pure/cheng_ruan/ncm/djradio/"
}

pac ()
{
	sudo pacman -Syu
	paru -Syu
	# not fully understand
	rm ~/.cache/paru/clone/neovim-nightly-bin/ -rf && paru --rebuild --redownload neovim-nightly-bin
	sudo pacman -Fy
}

qb ()
{
	rm -r -- "$HOME/programs/qbittorrent_search_plugins/"
	curlqb "$HOME/programs/qbittorrent_search_plugins/"
}

usb ()
{
	cfgc push usb
	cfgl push usb
	cfgs push usb
	git --git-dir="$XDG_DOCUMENTS_DIR/notes/.git" --work-tree="$XDG_DOCUMENTS_DIR/notes/" push usb
}

misc ()
{
	tldr --update
	nvim +PlugUpgrade +PlugUpdate +qa
}

if [ $# -eq 0 ]; then
	pac
	misc
	qb
	ncm
	kg
	refl
	gall
else
	while getopts rgknpqum opt; do
		case $opt in
			r)refl;;
			g)gall;;
			k)kg;;
			n)ncm;;
			p)pac;;
			q)qb;;
			u)usb;;
			m)misc;;
			\?)exit 1;;
		esac
	done
fi
